<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Conjecturing by nvcleemp</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Conjecturing</h1>
        <p></p>

        <p class="view"><a href="https://github.com/nvcleemp/conjecturing">View the Project on GitHub <small>nvcleemp/conjecturing</small></a></p>


        <ul>
          <li><a href="https://github.com/nvcleemp/conjecturing/archive/0.12.tar.gz">Download <strong>0.12</strong></a></li>
          <li><a href="https://github.com/nvcleemp/conjecturing/archive/0.12-CoCalc.zip">Download <strong>0.12-CoCalc</strong></a></li>
          <li><a href="https://github.com/nvcleemp/conjecturing">View On <strong>GitHub</strong></a></li>
        </ul>

         <p></p>

          <p class="view" style="margin-bottom: 0px"><a href="#installation">Installation</a></p>
          <p class="view" style="margin-bottom: 0px; margin-left: 10px"><a href="#installing-in-sage">Installing in Sage</a></p>
          <p class="view" style="margin-bottom: 0px; margin-left: 10px"><a href="#conjecturing-on-cocalc-">Conjecturing on CoCalc</a></p>
          <p class="view" style="margin-bottom: 0px; margin-left: 10px"><a href="#no-installation">Conjecturing without installation</a></p>
          <p class="view" style="margin-bottom: 0px"><a href="#quickstart">Quickstart</a></p>
          <p class="view" style="margin-bottom: 0px"><a href="#layout-of-the-repository">Layout of the repository</a></p>
          <p class="view" style="margin-bottom: 0px"><a href="#usage">Usage</a></p>
          <p class="view" style="margin-bottom: 0px; margin-left: 10px"><a href="#making-conjectures-in-sage">Making conjectures in Sage</a></p>
          <p class="view" style="margin-bottom: 0px; margin-left: 10px"><a href="#running-the-examples">Running the examples</a></p>
          <p class="view" style="margin-bottom: 0px; margin-left: 10px"><a href="#c-program">C program</a></p>

      </header>
      <section>
        <h1>
<a id="conjecturing-for-sage" class="anchor" href="#conjecturing-for-sage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conjecturing for Sage</h1>

<p>The code in this repository is described in the following papers:</p>

<ul>
    <li>C. E. Larson and N. Van Cleemput, <a href="http://www.sciencedirect.com/science/article/pii/S0004370215001575">Automated Conjecturing I: Fajtlowicz's Dalmatian Heuristic Revisited</a>, Artificial Intelligence 231, 2016, 17-38.</li>
    <li>C. E. Larson and N. Van Cleemput, <a href="https://link.springer.com/article/10.1007%2Fs10472-017-9559-5">Automated Conjecturing III: Property-relations conjectures</a>, Annals of Mathematics and Artificial Intelligence 81 (3), 2017, 315-327.</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a id="installing-in-sage" class="anchor" href="#installing-in-sage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing in Sage</h3>

<p>First you need to locate the Sage installation into which you want to install conjecturing. In case this is the system installation of Sage, you can find the location using the command <code>which sage</code>.</p>

<ul>
    <li>Download the archive <a href="https://github.com/nvcleemp/conjecturing/releases/download/0.12/spkg.zip">spkg.zip</a>, extract it and copy the directory <i>conjecturing</i> into the directory <i>SAGE_ROOT/build/pkgs</i>.</li>
    <li>Download the archive <a href="https://github.com/nvcleemp/conjecturing/archive/0.12.tar.gz">conjecturing-0.12.tar.gz</a> and place the file into <i>SAGE_ROOT/upstream</i>.</li>
    <li>Run the following command: <code>$ sage --package fix-checksum conjecturing</code><br>Make sure that you use the Sage installation into which you are installing.</li>
    <li>Install the package using the following command: <code>$ sage -i conjecturing</code><br>Make sure that you use the Sage installation into which you are installing.</li>
</ul>

<h3>
<a id="conjecturing-on-cocalc-" class="anchor" href="#conjecturing-on-cocalc-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conjecturing on CoCalc</h3>

<p>One easy way to work with Sage is by going to <a href="http://www.cocalc.com">http://www.cocalc.com</a>. Of course you can use our code on CoCalc. By default, however, it is not possible to install additional packages there, so we created a separate release of the conjecturing package which can easily be used on CoCalc.</p>

<ul>
<li>Download the <a href="https://github.com/nvcleemp/conjecturing/archive/0.12-CoCalc.zip">0.12-CoCalc release</a>.</li>
<li>Create a new project on CoCalc, and upload the zip file from the previous step to that project.</li>
<li>Open a terminal on CoCalc and execute the following commands:</li>
</ul>

<pre><code>~$ unzip conjecturing-0.12-CoCalc
~$ cd conjecturing-0.12-CoCalc
~/conjecturing-0.12-CoCalc$ make
</code></pre>

<ul>
<li>You are done. You can now start conjecturing using a Terminal or a Sage Worksheet. You can just follow the instructions above. In case you are bothered by the zip file and the directory 0.12-CoCalc, you can just remove them. Do not remove the files <code>expressions</code> and <code>conjecturing.py</code>.</li>
</ul>

<p>You can check that the installation was successful by creating a worksheet, copying the code below and executing it. If everything went OK, you should see some conjectures.</p>

<pre><code>load('conjecturing.py')
def max_degree(g):
    return max(g.degree())
invariants = [Graph.size, Graph.order, max_degree]
objects = [graphs.CompleteGraph(n) for n in [3,4,5]]
conjecture(objects, invariants, 0)
</code></pre>

<p>To update to a newer version, you just repeat the steps above for the newer zip file.</p>

<h3>
<a id="no-installation" class="anchor" href="#no-installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conjecturing without installation</h3>

<p>You might want to use our code without going through the hassle of installing it within Sage. This might be the case if you do not have the correct priviliges to install conjecturing, or if you are using the Sage version from your distribution and you don't want to make changes to it. It is possible to do this, although it brings some limitations with it.</p>

<ul>
<li>Download the <a href="https://github.com/nvcleemp/conjecturing/archive/0.12-CoCalc.zip">0.12-CoCalc release</a>.</li>
<li>Unzip the folder into a temporary directory.</li>
<li>Open a terminal, change the location to this directory and issue the <code>make</code> command.</li>
<li>You are done. You can now start conjecturing, but do not remove the files <code>expressions</code> and <code>conjecturing.py</code> that were copied into your home directory.</li>
</ul>

<p>In case you use this setup, you will only be able to use conjecturing if Sage is started from your home directory. You can move the files <code>expressions</code> and <code>conjecturing.py</code> to another location, but then conjecturing will only work if Sage is started from that location.</p>

<p>To update to a newer version, you just repeat the steps above for the newer zip file.</p>

<h2>
<a id="quickstart" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h2>

<p>See the directory <code>spkg</code> for instructions on how to build and install a Sage package containing the expressions program.
Once you have built and installed such a Sage package, you can use the Python files in the directory <code>sage</code> to interact
with the package.</p>

<p>Open the directory <code>sage</code> in a terminal window and start Sage. Usually this is done using the following command:</p>

<pre><code>$ sage
</code></pre>

<p>Once Sage has started, you can load the file <code>conjecturing.py</code>:</p>

<pre><code>sage: attach('conjecturing.py')
</code></pre>

<p>You can also choose to load any of the other files, but this is not necessary.</p>

<p>An example run might look like this:</p>

<pre><code>sage: attach('conjecturing.py')
sage: attach('numbertheory.py')
sage: objects = [5, 10]
sage: conjecture(objects, invariants, 1)
</code></pre>

<p>Note that loading the file <code>numbertheory.py</code> sets the variable <code>invariants</code> to a list of invariants used in number theory.</p>

<h2>
<a id="layout-of-the-repository" class="anchor" href="#layout-of-the-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>Layout of the repository</h2>

<p>The repository contains four directory:</p>

<ul>
<li>
<code>c</code>: this directory contains the code for the program expressions which is used to generate the expressions and conjectures. This program can also be used as a stand-alone program.</li>
<li>
<code>spkg</code>: this directory contains the scripts needed to install the C program as a package in Sage.</li>
<li>
<code>sage</code>: this directory contains the Python scripts which integrate the C program into Sage.</li>
<li>
<code>examples</code>: this directory contains several examples of how the code in this repository can be used.</li>
</ul>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a id="making-conjectures-in-sage" class="anchor" href="#making-conjectures-in-sage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Making conjectures in Sage</h3>

<p>Once you have installed the Sage Package (either by downloading and installing it, or by building it yourself and then installing it), you can load the files in the directory <code>sage</code> to make conjectures within Sage. The most important file is <code>conjecturing.py</code>. This loads the code needed to make conjectures. The remaining files just provide utility methods to make conjectures for graph theory, matrix theory and number theory.</p>

<p>Simply start Sage from the directory <code>sage</code> and once Sage is started, give the following command:</p>

<pre><code>sage: load('conjecturing.py')
</code></pre>

<p>This is all you need to do. From now on you can use the method <code>conjecture</code> to make conjectures. This method needs three arguments, and can take several additional optional arguments. The arguments that need to be provided are:</p>

<ul>
<li>
<code>objects</code>: the objects on which the conjectures will be based.</li>
<li>
<code>invariants</code>: the invariants that can appear in the conjectures.</li>
<li>
<code>mainInvariant</code>: the main invariant that will appear on the left-hand-side of the comparator.</li>
</ul>

<p>These three are sufficient to make conjectures:</p>

<pre><code>sage: def max_degree(g):
....:    return max(g.degree())
....:
sage: invariants = [Graph.size, Graph.order, max_degree]
sage: objects = [graphs.CompleteGraph(n) for n in [3,4,5]]
sage: conjecture(objects, invariants, 0)
[size(x) &lt;= 2*order(x),
 size(x) &lt;= max degree(x)^2 - 1,
 size(x) &lt;= 1/2*order(x)*max degree(x)]
</code></pre>

<p>You can also make property-based conjectures:</p>

<pre><code>sage: properties = [is_prime, is_even]
sage: objects = [3]
sage: propertyBasedConjecture(objects, properties, 0)
[(~(is_even))-&gt;(is_prime)]
</code></pre>

<p>The methods provide more detailed information together with several examples. You can access this information by running the following commands:</p>

<pre><code>sage: help(conjecture)
sage: help(propertyBasedConjecture)</code></pre>

<p>or</p>

<pre><code>sage: conjecture?
sage: propertyBasedConjecture?</code></pre>

<h3>
<a id="running-the-examples" class="anchor" href="#running-the-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running the examples</h3>

<p>Each of the examples in the directory <code>examples</code> specify which files need to be loaded for the example to work. The examples are referred to from the paper. Most of the examples come in two versions: a short and a long version. The short version immediately should give the conjectures as they appear in the paper. Since in most cases the conjecturing is halted by the time limit, in some cases there might be a small discrepancy between the conjectures in the paper and the conjectures you get. The long version repeats the steps we took to produce the conjectures, i.e., start with a small set, generate conjectures, look for counterexamples, add them to the objects, generate conjectures, ... Note that these long versions sometimes take very long (some need multiple days!).</p>

<p>For example, to run the first example of goldbach conjectures, you proceed as follows. Start Sage in the directory <code>examples</code>. Execute the following commands:</p>

<pre><code>sage: load('../sage/conjecturing.py')
sage: load('../sage/numbertheory.py')
sage: load('goldbach_conjectures1.py')
The conjectures are stored in the variable conjectures.
sage: conjectures
[goldbach(x) &gt;= (1/digits10(x)), goldbach(x) &gt;= digits10(x) - 1]
</code></pre>

<p>If you want to run the long version, then you load the file which has -long appended to the name:</p>

<pre><code>sage: load('../sage/conjecturing.py')
sage: load('../sage/numbertheory.py')
sage: load('goldbach_conjectures1-long.py')
Starting with these objects:
 4

Available invariants:
   goldbach
   prime_pi
   euler_phi
   number
   digits10
   digits2
   sigma
   count_divisors
   next_prime
   previous_prime
   count_quadratic_residues
   mertens
   li
   zeta
   reciprocal_prime_sum
   max_prime_divisor
   prime_product

Found the following conjectures:
 goldbach(x) &gt;= digits10(x)

Step 1: Adding 12
Found the following conjectures:
 goldbach(x) &gt;= (1/digits10(x))
 goldbach(x) &gt;= digits10(x) - 1

No counterexample found
The conjectures are stored in the variable conjectures.
sage: conjectures
[goldbach(x) &gt;= (1/digits10(x)), goldbach(x) &gt;= digits10(x) - 1]
</code></pre>

<p>Note that this will take quite long to verify these two conjectures for all values it checks.</p>

<h3>
<a id="c-program" class="anchor" href="#c-program" aria-hidden="true"><span class="octicon octicon-link"></span></a>C program</h3>

<p>Building the C program is simple: just execute the command <code>make</code> in the directory <code>c</code>. This will build the program <code>expressions</code>. A detailed usage message for <code>expressions</code> can be obtained by executing the following command:</p>

<pre><code>$ ./expressions -h
</code></pre>

<p>In the Sage code this program is used to generate the conjectures, but it can also be used to generate the intermediate structures.</p>

<p>To generate rooted binary trees with a 0 binary nodes (i.e., with two children) and with 1 unary node (i.e., with one child), you can use the following command:</p>

<pre><code>$ ./expressions -u 1 0
Found 1 unlabeled trees.
</code></pre>

<p>To generate labeled rooted binary trees, you also have to specify the number of invariants (i.e., labels for the leaves):</p>

<pre><code>$ ./expressions -l 1 0 2
Found 1 unlabeled trees.
Found 10 labeled trees.
</code></pre>

<p>To generate valid expressions, you need to input the values of invariants for all objects. Assume that the content of the file <code>values.txt</code> is this:</p>

<pre><code>3 4 2
3
3
2
2
5
5
2
2
5
10
4
4
</code></pre>

<p>The first line tells us that there are 3 objects, 4 invariants and that the second invariant is the main invariant. This corresponds to the following situation:</p>

<pre><code>           Invariant  1  Invariant  2  Invariant  3  Invariant  4
 object 1)    3.000000      3.000000      2.000000      2.000000
 object 2)    5.000000      5.000000      2.000000      2.000000
 object 3)    5.000000     10.000000      4.000000      4.000000
</code></pre>

<p>Now you can generate all valid expressions with one unary operator as follows:</p>

<pre><code>$ ./expressions -e 1 0 --all-operators --print-valid-expressions &lt; values.txt
I2 &lt;= (I1) * 2
I2 &lt;= (I1) ^ 2
Found 1 unlabeled trees.
Found 30 labeled trees.
Found 2 valid expressions.
</code></pre>

<p>Finally you can also generate conjectures using the same file:</p>

<pre><code>$ ./expressions -c --all-operators --dalmatian &lt; values.txt
Generation process was stopped by the conjecturing heuristic.
Found 5 unlabeled trees.
Found 410 labeled trees.
Found 53 valid expressions.
I2 &lt;= (I1) * 2
I2 &lt;= ((I1) / 2) * (I3)
I2 &lt;= ((I3) ^ 2) + 1
</code></pre>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/nvcleemp">nvcleemp</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>

  </body>
</html>
